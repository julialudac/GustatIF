<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Interface Gestionnaire - Drônes</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="//code.jquery.com/jquery-1.12.1.min.js"></script>
        <script src="js/jquery.steps.js"></script>
        <link href="css/roundBorder.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <!--------header----------->
        <header>
            <span id="spanLogo"> <img src="logoGustatif.jpg"/> </span> 
            <span class='centralH'>
                <span style="background-color:brown;" id="droneTab">Drones</span>
                <span> > </span>
                <span style="cursor:pointer" id="veloTab">Vélo</span>
                <span> > </span>
                <span style="cursor:pointer" id="carteTab">Carte</span>
            </span>
            <select style="background-color: brown; width: 200px;" name="listeDeconn" class="statusConn">
                <option value="username" id="connection">ADMIN!</option>
                <option value="deconnexion">Se déconnecter</option>
            </select>
        </header>
        
        <h1>Interface Gestionnaire</h1>
        <h2>Liste des drones</h2>
        
        <!-- Tableau drones -->
        <div>
            <table id="tabDrones">
            </table>  
        </div>
        <!-- Détail drone -->
        <div>
            <div id="descr">Pas de drône sélectionné</div>
            <input type="button" value="Détails Commande"/> <br/>
            <input type="button" value="Clôturer Commande"/>
        </div>
        
        
        <script>
            $(function(){
                
                // requête ajax pour récupérer les drones 
                $.ajax({
                    url: './ActionServlet',
                    type: 'POST',
                    data: {
                        action: 'getClientsRestoLivreurs',
                    },
                    dataType: 'json'
                })
                .done(function(data) {
                    var drones = data.drones;
                    var contenuHtml = '<table><thead><th>Code Drone</th><th>Adresse</th><th>Dispo</th><th>Vitesse Moy</th><th>Poids max</th></thead><tbody>';
                    var i; 
                    for (i = 0; i < drones.length; i++) {
                        contenuHtml += '<tr id="tr_drone" style="cursor:pointer" onmouseover="over_color(this)" onmouseout="remove_color(this)" onclick="click_color(this)">\n\
                        <td id="idDrone"> ' + drones[i].code + '</td>\n\
                        <td>'+ drones[i].adresse + '</td>'
                        + '<td>'+drones[i].dispo +'</td>'
                        + '<td>'+drones[i].vit+'</td>'
                        + '<td>'+drones[i].poidsMax+'</td></tr>';
                    }
                    contenuHtml += '</tbody></table>';
                    $('#tabDrones').html(contenuHtml);
                })
                .fail(function() {
                    $('#tabDrones').html('ERREUR de chargement');
                })
                .always(function() {
                    //
                });
                
                // code pour se déco 
                var listeDer = document.getElementsByTagName("select")[0];
                listeDer.onchange = function(){
                    if(listeDer.value == "deconnexion"){
                        window.location.href = "accueilNonClient.html";
                    }
                };
                
                // direction vers les autres tabs
                $("#veloTab").click(function(){
                    window.location.href = "itfAdminVelo.html";
                });
                $("#carteTab").click(function(){
                    window.location.href = "carteGestionnaire.html";
                });

            });
                
                
        </script>
        
    </body>
</html>
